# RocketMQ Broker 配置文件
# 修改时间：2025-10-22 00:48:07
# @author lingbai

# 集群配置
brokerClusterName = DefaultCluster
brokerName = broker-a
brokerId = 0

# 网络配置
listenPort = 10911
namesrvAddr = rocketmq-nameserver:9876

# 存储配置 - 使用容器内的标准路径
storePathRootDir = /home/rocketmq/store
storePathCommitLog = /home/rocketmq/store/commitlog
storePathConsumeQueue = /home/rocketmq/store/consumequeue
storePathIndex = /home/rocketmq/store/index
storeCheckpoint = /home/rocketmq/store/checkpoint
abortFile = /home/rocketmq/store/abort

# 调度消息服务配置路径 - 修复 NullPointerException
scheduleMessageServiceConfigPath = /home/rocketmq/store/config/delayOffset.json

# 消息配置
maxMessageSize = 65536
deleteWhen = 04
fileReservedTime = 72

# Broker 角色配置
brokerRole = ASYNC_MASTER
flushDiskType = ASYNC_FLUSH

# 自动创建配置
autoCreateTopicEnable = true
autoCreateSubscriptionGroup = true

# 性能优化配置
sendMessageThreadPoolNums = 128
pullMessageThreadPoolNums = 128
queryMessageThreadPoolNums = 8
adminBrokerThreadPoolNums = 16
clientManageThreadPoolNums = 32
consumerManageThreadPoolNums = 32

# 内存配置
useReentrantLockWhenPutMessage = false
flushCommitLogLeastPages = 4
flushConsumeQueueLeastPages = 2
flushCommitLogThoroughInterval = 10000
flushConsumeQueueThoroughInterval = 60000

# 网络配置优化
serverWorkerThreads = 8
serverCallbackExecutorThreads = 0
serverSelectorThreads = 3
serverOnewaySemaphoreValue = 256
serverAsyncSemaphoreValue = 64
channelNotActiveInterval = 60000

# 客户端配置
clientWorkerThreads = 4
clientCallbackExecutorThreads = 2
clientOnewaySemaphoreValue = 65535
clientAsyncSemaphoreValue = 65535

# 延迟消息配置
messageDelayLevel = 1s 5s 10s 30s 1m 2m 3m 4m 5m 6m 7m 8m 9m 10m 20m 30m 1h 2h

# 事务消息配置
transactionTimeOut = 6000
transactionCheckMax = 15
transactionCheckInterval = 60000

# 日志配置
enablePropertyFilter = false
compressedRegister = false
